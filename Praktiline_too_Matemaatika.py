import random

def получить_ввод_пользователя(сообщение, тип=int):
    """Функция для получения ввода пользователя с проверкой ошибок."""
    while True:
        try:
            return тип(input(сообщение))
        except ValueError:
            print("Неверный ввод. Попробуйте еще раз.")

def создать_пример(уровень, диапазон_чисел):
    """Создает математический пример на основе уровня и диапазона чисел."""
    операции = {1: ['+'], 2: ['+', '-'], 3: ['+', '-', '*', '/']}
    операция = random.choice(операции[уровень])

    число1 = random.randint(1, диапазон_чисел)
    число2 = random.randint(1, диапазон_чисел)

    if операция == '/':
        while число2 == 0:
            число2 = random.randint(1, диапазон_чисел)

    пример = f"{число1} {операция} {число2}"
    правильный_ответ = round(eval(пример), 2)
    return пример, правильный_ответ

def математическая_викторина():
    print("Добро пожаловать в Математическую Викторину!")
    print("Выберите уровень сложности:")
    print("1 - Легкий (только сложение)")
    print("2 - Средний (сложение и вычитание)")
    print("3 - Сложный (сложение, вычитание, умножение, деление)")

    уровень = получить_ввод_пользователя("Введите уровень (1, 2 или 3): ", int)
    while уровень not in [1, 2, 3]:
        print("Неверный уровень. Пожалуйста, выберите 1, 2 или 3.")
        уровень = получить_ввод_пользователя("Введите уровень (1, 2 или 3): ", int)

    диапазон_чисел = получить_ввод_пользователя("Введите максимальный диапазон чисел (например, 10, 50, 100): ", int)
    количество_вопросов = получить_ввод_пользователя("Введите количество вопросов: ", int)

    очки = 0
    for i in range(количество_вопросов):
        print(f"\nВопрос {i + 1} из {количество_вопросов}")
        пример, правильный_ответ = создать_пример(уровень, диапазон_чисел)
        print("Решите:", пример)
        ответ_пользователя = получить_ввод_пользователя("Ваш ответ: ", float)

        if ответ_пользователя == правильный_ответ:
            print("Верно!")
            очки += 1
        else:
            print(f"Неверно. Правильный ответ: {правильный_ответ}")

    print("\nВикторина завершена!")
    процент = (очки / количество_вопросов) * 100
    print(f"Ваш результат: {процент:.2f}%")

    if процент < 60:
        оценка = 2
    elif 60 <= процент < 75:
        оценка = 3
    elif 75 <= процент < 90:
        оценка = 4
    else:
        оценка = 5

    print(f"Ваша оценка: Hinne {оценка}")

if __name__ == "__main__":
    математическая_викторина()